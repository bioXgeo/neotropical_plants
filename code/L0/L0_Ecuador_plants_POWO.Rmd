---
title: "Ecuador plant species POWO"
author: "Hazel J. Anderson"
collaborators: "None"
data input: "Ecuador_POWO_species_list.csv"
data output: "TBD"
project: "Frugivoria"
date: "2022-10-10"
output: html_document
---

# Set file paths
```{r}
data_path<-file.path('G:/Shared drives/SpaCE_Lab_FRUGIVORIA/data/plants/L0')
output_path<- file.path('G:/Shared drives/SpaCE_Lab_FRUGIVORIA/data/plants/L0')
```

# Load required packages
```{r}
library(kewr)
library(dplyr)
```

# Search Plants of the World Online [https://powo.science.kew.org/] for species in Ecuador
## Best to break up request into smaller chunks so R handle it without timing out
```{r}
Ecuador_POWO_page1 <- search_powo(list(distribution="Ecuador"), limit = 5000)
Ecuador_POWO_page2 <- request_next(Ecuador_POWO_page1)
Ecuador_POWO_page3 <- request_next(Ecuador_POWO_page2)
Ecuador_POWO_page4 <- request_next(Ecuador_POWO_page3)
Ecuador_POWO_page5 <- request_next(Ecuador_POWO_page4)
```

# Combine pages
```{r}
Ecuador_POWO <- bind_rows(
  tidy(Ecuador_POWO_page1),
  tidy(Ecuador_POWO_page2),
  tidy(Ecuador_POWO_page3),
  tidy(Ecuador_POWO_page4),
  tidy(Ecuador_POWO_page5)
)
```

# Summary
```{r}
summary(Ecuador_POWO)
na_summary(Ecuador_POWO)
```

# Write data to csv
```{r}
Ecuador_POWO_path <- file.path(output_path, "Ecuador_POWO.csv")
write.csv(Ecuador_POWO, file = Ecuador_POWO_path)
```

