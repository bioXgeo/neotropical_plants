---
title: "Ecudor plant species IUCN statuses"
author: "Hazel Anderson"
collaborators: "None"
data input: "Ecuador_unique_species_list.csv"
data output: "TBD"
project: "Frugivoria"
date: "2022-08-31"
output: html_document
---
# Set Working directory
```{r}
setwd('G:/Shared drives/SpaCE_Lab_FRUGIVORIA/data/plants/L0')
```

# Load required packages
```{r}
library(jsonlite)
library(rredlist)
```

```{r}
## Token for accessing IUCN data through their API
## User must obtain a token (https://apiv3.iucnredlist.org/api/v3/token) before using the 'rredlist package'.
token <- 'f632af67ee5eef8446a8cb0ca394e1f1cb369ca5eab626edc4ea46e5698deb25'
api_url <- 'https://apiv3.iucnredlist.org/api/v3/'

#Ecuador
ecuador_species <- rl_sp_country("EC", key = token, parse = TRUE)
list <- ecuador_species$result[1]

# Get codes for the different species groups
grp_codes <- GET(url = paste0(api_url, 'comp-group/list?token=', token))
code <-fromJSON(content(grp_codes, as = 'text'), simplifyDataFrame = TRUE, flatten = TRUE)$result
```

