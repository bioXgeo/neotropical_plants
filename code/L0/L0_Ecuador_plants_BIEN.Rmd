---
title: "Ecuador plant species BIEN data"
authors: "Hazel J. Anderson"
collaborators: "None"
data input: "none"
data output: "Ecuador_BIEN_species_list.csv, Ecuador_BIEN_occurrence.csv, Ecuador_BIEN_traits.csv"
project: "Frugivoria"
date: "2022-08-17"
output: html_document
---
# Set file paths
```{r}
data_path <- file.path('G:/Shared drives/SpaCE_Lab_FRUGIVORIA/data/plants/L0')
output_path <- file.path('G:/Shared drives/SpaCE_Lab_FRUGIVORIA/data/plants/L0')
```

# Load required packages
```{r}
library(BIEN)
library(tidyr)
library(mde)
library(DataExplorer)
library(summarytools)
```


# Get data for Ecuador from BIEN database

```{r}
# occurrence data
Ecuador_BIEN_occ <- BIEN_occurrence_country("Ecuador")
# species list
Ecuador_BIEN_species_list <- BIEN_list_country(country = "Ecuador")
# trait data
Ecuador_BIEN_traits <- BIEN_trait_country("Ecuador")
```

## Data summary
```{r}
summary(Ecuador_BIEN_occ)
na_summary(Ecuador_BIEN_occ, exclude_cols = c("date_collected"))
```

```{r}
summary(Ecuador_BIEN_species_list)
na_summary(Ecuador_BIEN_species_list)
```

```{r}
summary(Ecuador_BIEN_traits)
na_summary(Ecuador_BIEN_traits)
```

### using DataExplorer package
```{r}
plot_str(Ecuador_BIEN_occ)
introduce(Ecuador_BIEN_occ)
plot_intro(Ecuador_BIEN_occ)
plot_missing(Ecuador_BIEN_occ)
plot_bar(Ecuador_BIEN_occ)
```

```{r}
plot_str(Ecuador_BIEN_species_list)
introduce(Ecuador_BIEN_species_list)
plot_intro(Ecuador_BIEN_species_list)
plot_missing(Ecuador_BIEN_species_list)
plot_bar(Ecuador_BIEN_species_list)
```

```{r}
plot_str(Ecuador_BIEN_traits)
introduce(Ecuador_BIEN_traits)
plot_intro(Ecuador_BIEN_traits)
plot_missing(Ecuador_BIEN_traits)
plot_bar(Ecuador_BIEN_traits)
```

### using summarytools package
```{r}
Ecuador_BIEN_occ_summary <- dfSummary(Ecuador_BIEN_occ, 
            na.col       = FALSE,
            style        = "multiline",
            plain.ascii  = TRUE,
            graph.magnif = .8)
print(Ecuador_BIEN_occ_summary, method = "render")
view(Ecuador_BIEN_occ_summary, file = file.path(output_path,"Ecuador_BIEN_occ_summary.html"))
```

```{r}
Ecuador_BIEN_species_list_summary <- dfSummary(Ecuador_BIEN_species_list, 
            na.col       = FALSE,
            style        = "multiline",
            plain.ascii  = TRUE,
            graph.magnif = .8)
print(Ecuador_BIEN_species_list_summary, method = "render")
view(Ecuador_BIEN_species_list_summary, file = file.path(output_path,"Ecuador_BIEN_species_list_summary.html"))
```

```{r}
Ecuador_BIEN_traits_summary <- dfSummary(Ecuador_BIEN_traits, 
            na.col       = FALSE,
            style        = "multiline",
            plain.ascii  = TRUE,
            graph.magnif = .8)
print(Ecuador_BIEN_traits_summary, method = "render")
view(Ecuador_BIEN_traits_summary, file = file.path(output_path,"Ecuador_BIEN_traits_summary.html"))
```

# Write data to csv
```{r}
Ecuador_BIEN_occurrence_path <- file.path(output_path,"Ecuador_BIEN_occurrence.csv") 
write.csv(Ecuador_BIEN_occ, file = Ecuador_BIEN_occurrence_path)

Ecuador_BIEN_species_list_path <- file.path(output_path, "Ecuador_BIEN_species_list.csv")
write.csv(Ecuador_BIEN_species_list, file = Ecuador_BIEN_species_list_path)

Ecuador_BIEN_traits_path <- file.path(output_path, "Ecuador_BIEN_traits.csv")
write.csv(Ecuador_BIEN_traits, file = Ecuador_BIEN_traits_path)
```


